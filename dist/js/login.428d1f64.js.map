{"version":3,"sources":["webpack:///./src/views/Login.vue?a139","webpack:///./src/assets/images/dt.png","webpack:///./src/assets/images/wxlogin.png","webpack:///./src/views/Login.vue?3ac7","webpack:///src/views/Login.vue","webpack:///./src/views/Login.vue?09c2","webpack:///./src/views/Login.vue"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","attrs","directives","name","rawName","value","data","expression","domProps","on","$event","target","composing","$set","slot","staticStyle","onCheckboxChange","model","callback","$$v","checked","_v","onLogin","$router","push","wxLogin","staticRenderFns","token","remember","component"],"mappings":"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","file":"js/login.428d1f64.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=aae83fec&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=aae83fec&scoped=true&lang=css&\"","module.exports = __webpack_public_path__ + \"img/dt.ae06668f.png\";","module.exports = __webpack_public_path__ + \"img/wxlogin.d9a356a6.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"flex-column justify-center container\"},[_c('div',{staticClass:\"content\"},[_vm._m(0),_c('van-cell',[_c('van-field',{staticClass:\"inputs\",attrs:{\"size\":\"large\",\"border\":false}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.data.username),expression:\"data.username\"}],staticClass:\"slot-input\",attrs:{\"slot\":\"input\",\"placeholder\":\"请输入账号\"},domProps:{\"value\":(_vm.data.username)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.data, \"username\", $event.target.value)}},slot:\"input\"}),_c('van-icon',{attrs:{\"slot\":\"left-icon\",\"color\":\"white\",\"name\":\"contact\"},slot:\"left-icon\"})],1)],1),_c('van-cell',[_c('van-field',{staticClass:\"inputs\",attrs:{\"border\":false}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.data.password),expression:\"data.password\"}],staticClass:\"slot-input\",attrs:{\"slot\":\"input\",\"type\":\"password\",\"placeholder\":\"请输入密码\"},domProps:{\"value\":(_vm.data.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.data, \"password\", $event.target.value)}},slot:\"input\"}),_c('van-icon',{attrs:{\"slot\":\"left-icon\",\"color\":\"white\",\"name\":\"lock\"},slot:\"left-icon\"})],1)],1),_c('div',{staticClass:\"p_x25\",staticStyle:{\"width\":\"60%\"}},[_c('van-checkbox',{staticClass:\"m_t5\",attrs:{\"shape\":\"square\"},on:{\"change\":_vm.onCheckboxChange},model:{value:(_vm.checked),callback:function ($$v) {_vm.checked=$$v},expression:\"checked\"}},[_c('span',{staticClass:\"text-white line40 font14\"},[_vm._v(\"记住密码\")])])],1),_c('van-button',{staticClass:\"btn-login\",attrs:{\"type\":\"info\",\"size\":\"small\"},on:{\"click\":_vm.onLogin}},[_vm._v(\"登录\")]),_c('van-button',{staticClass:\"btn-reg\",attrs:{\"type\":\"info\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.$router.push({name:'register'})}}},[_vm._v(\" 注册 \")]),_c('div',{staticClass:\"flex-row justify-center align-center wx-login\",on:{\"click\":_vm.wxLogin}},[_c('img',{staticClass:\"wx-login-img\",attrs:{\"src\":require(\"../assets/images/wxlogin.png\")}})])],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"flex-row justify-center align-center\"},[_c('img',{staticClass:\"logo-image\",attrs:{\"src\":require(\"../assets/images/dt.png\")}})])}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"flex-column justify-center container\">\r\n        <div class=\"content\">\r\n            <div class=\"flex-row justify-center align-center\">\r\n                <img class=\"logo-image\" src=\"../assets/images/dt.png\"/>\r\n            </div>\r\n            <van-cell>\r\n                <van-field size=\"large\" :border=\"false\" class=\"inputs\">\r\n                    <input slot=\"input\" class=\"slot-input\" v-model=\"data.username\" placeholder=\"请输入账号\"/>\r\n                    <van-icon slot=\"left-icon\" color=\"white\" name=\"contact\"/>\r\n                </van-field>\r\n            </van-cell>\r\n            <van-cell>\r\n                <van-field :border=\"false\" class=\"inputs\">\r\n                    <input type=\"password\" slot=\"input\" class=\"slot-input\" v-model=\"data.password\" placeholder=\"请输入密码\"/>\r\n                    <van-icon slot=\"left-icon\" color=\"white\" name=\"lock\"/>\r\n                </van-field>\r\n            </van-cell>\r\n            <div class=\"p_x25\" style=\"width: 60%\">\r\n                <van-checkbox\r\n                        @change=\"onCheckboxChange\"\r\n                        v-model=\"checked\"\r\n                        class=\"m_t5\"\r\n                        shape=\"square\">\r\n                    <span class=\"text-white line40 font14\">记住密码</span>\r\n                </van-checkbox>\r\n            </div>\r\n            <van-button type=\"info\" class=\"btn-login\" size=\"small\" @click=\"onLogin\">登录</van-button>\r\n            <van-button @click=\"$router.push({name:'register'})\" type=\"info\" class=\"btn-reg\" size=\"small\">\r\n                注册\r\n            </van-button>\r\n\r\n            <div @click=\"wxLogin\" class=\"flex-row justify-center align-center wx-login\">\r\n                <img class=\"wx-login-img\" src=\"../assets/images/wxlogin.png\"/>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import config from \"../config\";\r\n    import validator from \"../utils/validator\";\r\n    import {login, userWxLogin} from \"../api/models/user\";\r\n    import {goWxLogin, isArray, isEmpty, isFunction} from \"../utils/helpers\";\r\n    import {getLoginToken} from \"../utils/db\";\r\n    import {Toast} from \"vant\";\r\n\r\n\r\n    export default {\r\n        data() {\r\n            return {\r\n                checked: false,\r\n                loading: null,\r\n                data: {\r\n                    username: '',\r\n                    password: '',\r\n                },\r\n                rememberKey: '___rememberLocalKey',\r\n                userNameKey: '___userNameLocalKey',\r\n                passwordKey: '___passwordLocalKey',\r\n            }\r\n        },\r\n        async created() {\r\n            const token = getLoginToken();\r\n            if (token) {\r\n                this.loginSuccess();\r\n            }\r\n            // socket关闭\r\n            if (isFunction(this.$disconnect)) this.$disconnect();\r\n\r\n            // 如果连接中有微信返回的 code，则用此 code 调用后端接口，向微信服务器请求用户信息\r\n            // 如果不是从微信重定向过来的，没有带着微信的 code，则直接进入首页\r\n            if (this.$route.query.code) {\r\n                let code = this.$route.query.code;\r\n                if (isArray(code)) {\r\n                    code = code.pop();\r\n                }\r\n                const res = await userWxLogin({code});\r\n                if (res) {\r\n                    this.loginSuccess();\r\n                }\r\n\r\n            }\r\n\r\n            // 历史记住密码\r\n            const remember = localStorage.getItem(this.rememberKey);\r\n            this.checked = remember === 'true';\r\n            const username = localStorage.getItem(this.userNameKey);\r\n            if (!isEmpty(username)) {\r\n                this.data.username = username;\r\n            }\r\n            const password = localStorage.getItem(this.passwordKey);\r\n            if (!isEmpty(password)) {\r\n                this.data.password = password;\r\n            }\r\n        },\r\n        methods: {\r\n            onCheckboxChange(val) {\r\n                localStorage.setItem(this.rememberKey, val);\r\n                if (!val) {\r\n                    this.remember();\r\n                }\r\n            },\r\n            remember(username = '', password = '') {\r\n                localStorage.setItem(this.userNameKey, username);\r\n                localStorage.setItem(this.passwordKey, password);\r\n            },\r\n            async onLogin() {\r\n                this.showLoading('登录中...');\r\n                let data = this.data;\r\n                let valid = validator(data, {\r\n                    username: 'required',\r\n                    password: 'required',\r\n                }, {\r\n                    username: '用户名',\r\n                    password: '密码',\r\n                });\r\n                if (valid) {\r\n                    let res = await login(data);\r\n                    this.closeLoading();\r\n                    if (res.message) {\r\n                        Toast(res.message)\r\n                    }\r\n                    if (res.state === 200) {\r\n                        if (this.checked) {\r\n                            this.remember(data.username, data.password);\r\n                        }\r\n                        this.loginSuccess();\r\n                    }\r\n\r\n                }\r\n\r\n            },\r\n            loginSuccess() {\r\n                this.$store.dispatch('getUserInfo');\r\n                this.$router.push({\r\n                    name: config.homeName,\r\n                    query: {formName: 'login'}\r\n                });\r\n            },\r\n            wxLogin() {\r\n                this.showLoading('登录中...', 1500);\r\n                goWxLogin(encodeURIComponent(window.location.href));\r\n            },\r\n            showLoading(message = '', duration = 0) {\r\n                this.closeLoading();\r\n                const _toast = Toast.loading({\r\n                    duration, // 0 持续展示 toast\r\n                    forbidClick: true,\r\n                    message,\r\n                });\r\n                if (duration === 0) {\r\n                    this._toast = _toast;\r\n                }\r\n\r\n            },\r\n            closeLoading() {\r\n                if (this._toast) {\r\n                    if (typeof this._toast.clear === 'function') {\r\n                        this._toast.clear();\r\n                    }\r\n                    this._toast = null;\r\n                }\r\n            },\r\n        }\r\n\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n    .container {\r\n        min-height: 100vh;\r\n        background: url('../assets/images/user_login_bg.png');\r\n        background-size: 100% 100%;\r\n    }\r\n\r\n    .content {\r\n        padding-left: 10%;\r\n        padding-right: 10%;\r\n    }\r\n\r\n    .inputs {\r\n        background-color: #8089B2;\r\n        border-radius: 40px;\r\n    }\r\n\r\n    .slot-input {\r\n        width: 100%;\r\n        color: white;\r\n        min-height: 30px;\r\n        background-color: transparent;\r\n        border-width: 0;\r\n    }\r\n\r\n    .slot-input::placeholder {\r\n        color: #0AF6F9;\r\n    }\r\n\r\n    .van-cell {\r\n        background-color: transparent;\r\n        padding-bottom: 2px;\r\n    }\r\n\r\n    .left-icon {\r\n        color: white;\r\n    }\r\n\r\n    .btn-login {\r\n        display: block;\r\n        border-radius: 100px;\r\n        width: 100%;\r\n        border-width: 0;\r\n        height: 40px;\r\n        margin-top: 20px;\r\n        margin-bottom: 20px;\r\n        background: linear-gradient(to bottom, #138A38 0%, #54AE70 100%);\r\n    }\r\n\r\n    .btn-reg {\r\n        display: block;\r\n        border-radius: 100px;\r\n        width: 100%;\r\n\r\n        border-width: 0;\r\n        height: 40px;\r\n        background: linear-gradient(to bottom, #78B5EA 0%, #1684D5 100%);\r\n    }\r\n\r\n    .logo-image {\r\n        width: 120px;\r\n        height: 120px;\r\n    }\r\n\r\n    .wx-login {\r\n        padding-top: 10%;\r\n    }\r\n\r\n    .wx-login-img {\r\n        width: 80px;\r\n        height: 80px;\r\n    }\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=aae83fec&scoped=true&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&id=aae83fec&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"aae83fec\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}