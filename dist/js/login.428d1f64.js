(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"1b0b":function(e,t,s){"use strict";var a=s("6a92"),n=s.n(a);n.a},"5c6f":function(e,t,s){e.exports=s.p+"img/dt.ae06668f.png"},"5ed8":function(e,t,s){e.exports=s.p+"img/wxlogin.d9a356a6.png"},"6a92":function(e,t,s){},a55b:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex-column justify-center container"},[a("div",{staticClass:"content"},[e._m(0),a("van-cell",[a("van-field",{staticClass:"inputs",attrs:{size:"large",border:!1}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.data.username,expression:"data.username"}],staticClass:"slot-input",attrs:{slot:"input",placeholder:"请输入账号"},domProps:{value:e.data.username},on:{input:function(t){t.target.composing||e.$set(e.data,"username",t.target.value)}},slot:"input"}),a("van-icon",{attrs:{slot:"left-icon",color:"white",name:"contact"},slot:"left-icon"})],1)],1),a("van-cell",[a("van-field",{staticClass:"inputs",attrs:{border:!1}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.data.password,expression:"data.password"}],staticClass:"slot-input",attrs:{slot:"input",type:"password",placeholder:"请输入密码"},domProps:{value:e.data.password},on:{input:function(t){t.target.composing||e.$set(e.data,"password",t.target.value)}},slot:"input"}),a("van-icon",{attrs:{slot:"left-icon",color:"white",name:"lock"},slot:"left-icon"})],1)],1),a("div",{staticClass:"p_x25",staticStyle:{width:"60%"}},[a("van-checkbox",{staticClass:"m_t5",attrs:{shape:"square"},on:{change:e.onCheckboxChange},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[a("span",{staticClass:"text-white line40 font14"},[e._v("记住密码")])])],1),a("van-button",{staticClass:"btn-login",attrs:{type:"info",size:"small"},on:{click:e.onLogin}},[e._v("登录")]),a("van-button",{staticClass:"btn-reg",attrs:{type:"info",size:"small"},on:{click:function(t){return e.$router.push({name:"register"})}}},[e._v(" 注册 ")]),a("div",{staticClass:"flex-row justify-center align-center wx-login",on:{click:e.wxLogin}},[a("img",{staticClass:"wx-login-img",attrs:{src:s("5ed8")}})])],1)])},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex-row justify-center align-center"},[a("img",{staticClass:"logo-image",attrs:{src:s("5c6f")}})])}],o=(s("d3b7"),s("96cf"),s("f121")),i=s("7b0a"),r=s("87a7"),c=s("2fa3"),l=s("e31c"),u=s("d399"),d={data:function(){return{checked:!1,loading:null,data:{username:"",password:""},rememberKey:"___rememberLocalKey",userNameKey:"___userNameLocalKey",passwordKey:"___passwordLocalKey"}},created:function(){var e,t,s,a,n,o;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:if(e=Object(l["a"])(),e&&this.loginSuccess(),Object(c["k"])(this.$disconnect)&&this.$disconnect(),!this.$route.query.code){i.next=10;break}return t=this.$route.query.code,Object(c["h"])(t)&&(t=t.pop()),i.next=8,regeneratorRuntime.awrap(Object(r["o"])({code:t}));case 8:s=i.sent,s&&this.loginSuccess();case 10:a=localStorage.getItem(this.rememberKey),this.checked="true"===a,n=localStorage.getItem(this.userNameKey),Object(c["j"])(n)||(this.data.username=n),o=localStorage.getItem(this.passwordKey),Object(c["j"])(o)||(this.data.password=o);case 16:case"end":return i.stop()}}),null,this)},methods:{onCheckboxChange:function(e){localStorage.setItem(this.rememberKey,e),e||this.remember()},remember:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";localStorage.setItem(this.userNameKey,e),localStorage.setItem(this.passwordKey,t)},onLogin:function(){var e,t,s;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:if(this.showLoading("登录中..."),e=this.data,t=Object(i["a"])(e,{username:"required",password:"required"},{username:"用户名",password:"密码"}),!t){a.next=10;break}return a.next=6,regeneratorRuntime.awrap(Object(r["c"])(e));case 6:s=a.sent,this.closeLoading(),s.message&&Object(u["a"])(s.message),200===s.state&&(this.checked&&this.remember(e.username,e.password),this.loginSuccess());case 10:case"end":return a.stop()}}),null,this)},loginSuccess:function(){this.$store.dispatch("getUserInfo"),this.$router.push({name:o["a"].homeName,query:{formName:"login"}})},wxLogin:function(){this.showLoading("登录中...",1500),Object(c["g"])(encodeURIComponent(window.location.href))},showLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.closeLoading();var s=u["a"].loading({duration:t,forbidClick:!0,message:e});0===t&&(this._toast=s)},closeLoading:function(){this._toast&&("function"===typeof this._toast.clear&&this._toast.clear(),this._toast=null)}}},m=d,h=(s("1b0b"),s("2877")),g=Object(h["a"])(m,a,n,!1,null,"aae83fec",null);t["default"]=g.exports}}]);
//# sourceMappingURL=login.428d1f64.js.map