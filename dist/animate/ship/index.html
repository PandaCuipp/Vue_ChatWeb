<!doctype html>
<html class="no-js" lang="">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="user-scalable=yes, width=1334, target-densityDpi=device-dpi"/>
    <link rel="stylesheet" href="./css/fonts.css">
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/stylespreloader.css" type="text/css" media="screen, print"/>
    <script src="./js/modernizr-2.8.3.min.js"></script>
</head>
<body>
<div class="container">
    <div class="header">
        <div class="logo" style="display: none"><img src="./images/logo.png" width="220" height="57" alt=""/></div>
        <div class="position">
            <div class="positm" id="pos1"></div>
            <div class="positm" id="pos2"></div>
            <div class="positm" id="pos3"></div>
            <div class="positm" id="pos4"></div>
            <div class="positm" id="pos5"></div>
            <div class="positm" id="pos6"></div>
            <div class="positm" id="pos7"></div>
            <div class="positm" id="pos8"></div>
            <div class="positm" id="pos9"></div>
            <div class="positm" id="pos10"></div>
        </div>
        <div class="currentdraw">
            期号 : <span id="currentdrawid">100002</span>
        </div>
        <div class="soundBox">
            <button id="soundBtn" class="on"></button>
        </div>
    </div>
    <div class="scenary page1">
        <div class="scenaryitm" id="scenaryitm">
            <img src="./images/scenery.jpg" width="2668" height="170" alt=""/>
        </div>
    </div>
    <div class="road page1">
        <div class="roadani">
            <div class="roaditm" id="roaditm">
                <img src="./images/road.jpg" width="2660" height="520" alt=""/>
            </div>
        </div>
        <div class="roadstart" id="roadstart"><img src="./images/finisher.png" width="249" height="515" alt=""/>

        </div>
        <div class="car1" id="car1"><img src="./images/car1.png" alt=""/>
            <div class="wheel10a">
                <img src="./images/wheel.png" alt=""/>
            </div>
            <div class="wheel10b">
                <img src="./images/wheel2.png" alt=""/>
            </div>
            <div class="wind">
                <img src="./images/wind.png" width="144" height="53" alt=""/>
            </div>
            <div class="flame">
                <img src="./images/flame.png" width="49" height="11" alt=""/>
            </div>
        </div>
        <div class="car2" id="car2"><img src="./images/car2.png" alt=""/>
            <div class="wheel10a">
                <img src="./images/wheel.png" alt=""/>
            </div>
            <div class="wheel10b">
                <img src="./images/wheel2.png" alt=""/>
            </div>
            <div class="wind">
                <img src="./images/wind.png" width="154" height="51" alt=""/>
            </div>
            <div class="flame">
                <img src="./images/flame.png" width="49" height="11" alt=""/>
            </div>
        </div>
        <div class="car3" id="car3"><img src="./images/car3.png" alt=""/>
            <div class="wheel10a">
                <img src="./images/wheel.png" alt=""/>
            </div>
            <div class="wheel10b">
                <img src="./images/wheel2.png" alt=""/>
            </div>
            <div class="wind">
                <img src="./images/wind.png" width="162" height="55" alt=""/>
            </div>
            <div class="flame">
                <img src="./images/flame.png" width="51" height="12" alt=""/>
            </div>

        </div>
        <div class="car4" id="car4"><img src="./images/car4.png" alt=""/>
            <div class="wheel10a">
                <img src="./images/wheel.png" alt=""/>
            </div>
            <div class="wheel10b">
                <img src="./images/wheel2.png" alt=""/>
            </div>
            <div class="wind">
                <img src="./images/wind.png" width="154" height="56" alt=""/>
            </div>
            <div class="flame">
                <img src="./images/flame.png" width="51" height="12" alt=""/>
            </div>

        </div>
        <div class="car5" id="car5"><img src="./images/car5.png" alt=""/>
            <div class="wheel10a">
                <img src="./images/wheel.png" alt=""/>
            </div>
            <div class="wheel10b">
                <img src="./images/wheel2.png" alt=""/>
            </div>
            <div class="wind">
                <img src="./images/wind.png" width="158" height="57" alt=""/>
            </div>
            <div class="flame">
                <img src="./images/flame.png" width="53" height="13" alt=""/>
            </div>

        </div>
        <div class="car6" id="car6"><img src="./images/car6.png" alt=""/>
            <div class="wheel10a">
                <img src="./images/wheel.png" alt=""/>
            </div>
            <div class="wheel10b">
                <img src="./images/wheel2.png" alt=""/>
            </div>
            <div class="wind">
                <img src="./images/wind.png" width="161" height="59" alt=""/>
            </div>
            <div class="flame">
                <img src="./images/flame.png" width="53" height="13" alt=""/>
            </div>
        </div>
        <div class="car7" id="car7"><img src="./images/car7.png" alt=""/>
            <div class="wheel10a">
                <img src="./images/wheel.png" alt=""/>
            </div>
            <div class="wheel10b">
                <img src="./images/wheel2.png" alt=""/>
            </div>
            <div class="wind">
                <img src="./images/wind.png" width="163" height="63" alt=""/>
            </div>
            <div class="flame">
                <img src="./images/flame.png" width="55" height="14" alt=""/>
            </div>
        </div>
        <div class="car8" id="car8"><img src="./images/car8.png" alt=""/>
            <div class="wheel10a">
                <img src="./images/wheel.png" alt=""/>
            </div>
            <div class="wheel10b">
                <img src="./images/wheel2.png" alt=""/>
            </div>
            <div class="wind">
                <img src="./images/wind.png" width="165" height="65" alt=""/>
            </div>
            <div class="flame">
                <img src="./images/flame.png" width="55" height="14" alt=""/>
            </div>
        </div>
        <div class="car9" id="car9"><img src="./images/car9.png" alt=""/>
            <div class="wheel10a">
                <img src="./images/wheel.png" alt=""/>
            </div>
            <div class="wheel10b">
                <img src="./images/wheel2.png" alt=""/>
            </div>
            <div class="wind">
                <img src="./images/wind.png" width="177" height="72" alt=""/>
            </div>
            <div class="flame">
                <img src="./images/flame.png" width="57" height="15" alt=""/>
            </div>
        </div>
        <div class="car10" id="car10"><img src="./images/car10.png" alt=""/>
            <div class="wheel10a">
                <img src="./images/wheel.png" alt=""/>
            </div>
            <div class="wheel10b">
                <img src="./images/wheel2.png" alt=""/>
            </div>
            <div class="wind">
                <img src="./images/wind.png" width="177" height="72" alt=""/>
            </div>
            <div class="flame">
                <img src="./images/flame.png" width="58" height="16" alt=""/>
            </div>
        </div>

        <div class="trafficlight">
            <div class="countdownnum"></div>
            <div class="countdownnum2"></div>
            <!--<div class="redlight"><img src="./images/lightred.png" width="293" height="193" alt=""/></div>
 <div class="yellowlight"><img src="./images/lightyellow.png" width="293" height="193" alt=""/></div>
<div class="greenlight"><img src="./images/lightgreen.png" width="293" height="193" alt=""/></div>-->
        </div>

    </div>

    <div class="resultpage page2">
        <div class="resultitm result1" id="result1"><img src="./images/result1.png" width="226" height="177" alt=""/>
        </div>
        <div class="resultitm result2" id="result2"><img src="./images/result2.png" width="258" height="139" alt=""/>
        </div>
        <div class="resultitm result3" id="result3"><img src="./images/result3.png" width="173" height="112" alt=""/>
        </div>

        <div class="resultitm resultcar2" id="resultcar2"><img src="./images/winner1.png" width="422" height="184"
                                                               alt="" class="resultcarimg2"/></div>
        <div class="resultitm resultcar3" id="resultcar3"><img src="./images/winner1.png" width="384" height="166"
                                                               alt="" class="resultcarimg3"/></div>
        <div class="resultitm resultcar1" id="resultcar1"><img src="./images/winner1.png" width="510" height="222"
                                                               alt="" class="resultcarimg1"/></div>
    </div>

    <div class="footer">
        <div class="footer1">
            <div class="footer1_2">
                期号:<span id="nextdrawtime" style="margin-top: 6px;display: inline-block;">100001</span>
            </div>
        </div>
        <div class="footer2">
            <div class="footer2_1">冠亚:</div>
            <div class="footer2_2" id="stat1_1">0</div>
            <div class="footer2_2" id="stat1_2">-</div>
            <div class="footer2_2" id="stat1_3">-</div>
        </div>
        <div class="footer3">
            <div class="footer2_1">龙虎:</div>
            <div class="footer2_2" id="stat2_1">-</div>
            <div class="footer2_2" id="stat2_2">-</div>
            <div class="footer2_2" id="stat2_3">-</div>
            <div class="footer2_2" id="stat2_4">-</div>
            <div class="footer2_2" id="stat2_5">-</div>
        </div>
    </div>

    <div class="flashlight">
    </div>

</div>


<script src="./js/jquery-1.11.2.min.js"></script>
<script src="./js/TweenMax.min.js"></script>
<script src="./js/plugins.js"></script>
<script src="./js/main.js?v=1.2"></script>

<script>
    $(function () {
        playSound('bg');
    });

    function initZoomHtml(W) {
        const iContainer = $(".container")
        const iframeWidth = iContainer.width();//1125
        const H = W * iContainer.height() / iframeWidth;
        // const zoomW = formatMoney(W / iframeWidth, 6);
        const iFrameHeight = H + 10;
        postMessageToTop('initHeight', iFrameHeight);
    };

    function runFunction({type, data}) {
        const {functionName, args} = data;
        if (type === 'runFunction' && typeof window.__animate[functionName]) {
            window.__animate[functionName](...args);
        }

    }

    function postMessageToTop(type, data) {
        try {
            const message = JSON.stringify({
                type,
                data,
            });
            window.postMessage(message);
        } catch (e) {

        }

    }


    function playSound(key) {
        postMessageToTop('playSound', key)
        const Sounds = window.top.shipSounds;
        if (!Sounds) {
            return;
        }
        if (localStorage.getItem('___notAudio') === 'true') {
            return;
        }
        if (Sounds[key] && typeof Sounds[key].play === 'function') {
            Sounds[key].play();
        }
    }

    function pauseSound(key) {
        postMessageToTop('pauseSound', key)
        const Sounds = window.top.shipSounds;
        if (!Sounds) {
            return;
        }
        if (localStorage.getItem('___notAudio') === 'true') {
            return;
        }
        if (Sounds[key] && typeof Sounds[key].pause === 'function') {
            Sounds[key].pause();
        }
    }

    function pauseAllSound() {
        postMessageToTop('pauseAllSound')
        const Sounds = window.top.shipSounds;
        if (!Sounds) {
            return;
        }
        for (let audio of Object.values(Sounds)) {
            if (audio && typeof audio.pause === 'function') {
                audio.pause();
            }
        }
    }

    window.__animate = {
        startcountdown,
        midgame,
        finishgame,
        resultpage,
        showcurrentresult,
        initCurrentData(beforeQihao, currentQihao, haoma) {
            $('#nextdrawtime').text(beforeQihao || '000000');
            $('#currentdrawid').text(currentQihao || '000000');
            if (haoma) {
                if (typeof haoma === 'string') {
                    haoma = haoma.split(',');
                }
                // 冠亚和处理
                if (haoma.length >= 2) {
                    let gYaHe = Number(haoma[0]) + Number(haoma[1]);
                    if (isNaN(gYaHe)) {
                        gYaHe = 0;
                    }
                    let dx = gYaHe > 11;
                    let ds = gYaHe % 2 === 0;
                    let res = {
                        value: gYaHe,
                        dx: dx ? '大' : '小',
                        dxColor: dx ? 'red' : '#0089FF',
                        ds: ds ? '双' : '单',
                        dsColor: ds ? 'red' : '#0089FF',
                    };
                    $('#stat1_1').text(res.value);
                    $('#stat1_2').text(res.dx);
                    $('#stat1_2').css({background: res.dxColor});
                    $('#stat1_3').text(res.ds);
                    $('#stat1_3').css({background: res.dsColor});
                }

                // 龙虎处理
                if (haoma.length >= 10) {
                    showcurrentresult(haoma.join(','))
                    const bcComp = (a, b) => {
                        a = Number(a);
                        b = Number(b);
                        if (isNaN(a)) {
                            a = 0;
                        }
                        if (isNaN(b)) {
                            b = 0;
                        }
                        if (a === b) {
                            return 0;
                        }
                        return a > b ? 1 : -1;
                    };
                    let lh = [
                        bcComp(haoma[0], haoma[9]),
                        bcComp(haoma[1], haoma[8]),
                        bcComp(haoma[2], haoma[7]),
                        bcComp(haoma[3], haoma[6]),
                        bcComp(haoma[4], haoma[5]),
                    ];

                    const lhColor = (lh) => {
                        if (lh > 0) {
                            return 'red';
                        } else if (lh < 0) {
                            return '#0089FF';
                        }
                    };
                    const lhText = (lh) => {
                        if (lh > 0) {
                            return '龍';
                        } else if (lh < 0) {
                            return '虎';
                        }
                        return '和';
                    };

                    lh.map(function (item, index) {
                        const text = lhText(item);
                        const color = lhColor(item);
                        const itemDom = $(`#stat2_${index + 1}`);
                        itemDom.text(text);
                        if (color) {
                            itemDom.css({background: color});
                        }
                        return item;
                    })
                }
            }
        },
        postMessageToTop,
        initZoomHtml,
    }

</script>
</body>

</html>
